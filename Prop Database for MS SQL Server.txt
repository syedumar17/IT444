


CREATE TABLE branch
(branchno VARCHAR(5)
 ,street VARCHAR(100)
 ,city  VARCHAR(20)
 ,postcode varchar(10)
 ,PRIMARY KEY (branchno)
)


CREATE TABLE client
(clientno VARCHAR(5)
 ,fname VARCHAR(8)
 ,lname  VARCHAR(8)
 ,address varchar(35)
 ,tel_no varchar(14)
 ,pref_type char(6)
 ,max_rent numeric(4)
 ,PRIMARY KEY (clientno)
)

 alter table client
 drop column address

 alter table client
 add street VARCHAR(15)
 ,city  VARCHAR(10)
 ,postcode varchar(6)

create table viewing
( clientno VARCHAR(5)
 ,propertyno varchar(5)
 ,viewdate date
 ,comments varchar(200)
 ,PRIMARY KEY (clientno, propertyno)
)


CREATE TABLE private_owner
(ownerno VARCHAR(4)
 ,fname VARCHAR(20)
 ,lname  VARCHAR(20)
 ,street VARCHAR(15)
 ,city  VARCHAR(10)
 ,postcode varchar(6)
 ,tel_no varchar(14)
 ,PRIMARY KEY (ownerno)
)


create table registration
( clientno VARCHAR(5)
 ,branchno varchar(5)
 ,staffno varchar(5)
 ,datejoined date
 ,PRIMARY KEY (clientno, branchno, staffno)
)


CREATE TABLE staff
(staffno VARCHAR(5)
 ,fname VARCHAR(15)
 ,lname VARCHAR(15)
 ,position varchar(15)
 ,sex char(1)
 ,dob date
 ,salary numeric(7,2)
 ,branchno varchar(5)
 ,FOREIGN KEY(branchno) REFERENCES branch(branchno)
 ,PRIMARY KEY (staffno)
)


CREATE TABLE property_for_rent
(propertyno VARCHAR(5)
 ,street VARCHAR(15)
 ,city  VARCHAR(10)
 ,postcode varchar(6)
 ,type char(7)
 ,rooms numeric(2)
 ,rent numeric(4) 
 ,ownerno varchar(4)
 ,branchno varchar(5)
 ,staffno varchar(4)
 ,FOREIGN KEY(branchno) REFERENCES branch(branchno)
 ,PRIMARY KEY (propertyno)
)


create table lease
( lease_no varchar(6) 
,propertyno varchar(5)
,clientno varchar(5)
,rent numeric(4)
,payment_method char(7)
,deposit numeric(6)
,paid  char(1)
,rent_start date
,rent_finish  date
,duration numeric,
 PRIMARY KEY (lease_no)
 ,FOREIGN KEY (propertyno) REFERENCES property_for_rent(propertyno)
 ,FOREIGN KEY (clientno) REFERENCES client(clientno))


CREATE TABLE PropertyInquiry
(inqID VARCHAR(6)
 ,propertyno VARCHAR(5)
 ,staffno VARCHAR(5)
 ,inquiry_details VARCHAR(100)
 ,dates date
 ,FOREIGN KEY(propertyNo) REFERENCES property_for_rent(propertyNo)
 ,FOREIGN KEY(StaffNo) REFERENCES Staff(StaffNo)
 ,PRIMARY KEY (inqID, propertyNo, staffNo)
 )


CREATE TABLE Maintenance
(maintenance_ID VARCHAR(7)
 ,propertyno VARCHAR(5)
 ,staffno VARCHAR(5)
 ,details VARCHAR(100)
 ,cost VARCHAR(10)
 ,FOREIGN KEY(propertyNo) REFERENCES property_for_rent(propertyNo)
 ,FOREIGN KEY(StaffNo) REFERENCES Staff(StaffNo)
 ,PRIMARY KEY (maintenance_ID, propertyNo, staffNo)
 )


CREATE TABLE PropertyType
(p_type_ID VARCHAR(7)
 ,typename VARCHAR(15)
 ,PRIMARY KEY (p_type_ID)
 )

CREATE TABLE LEASEORPURCHASE
(Payment_ID VARCHAR(7)
 ,p_type_ID VARCHAR(7)
 ,propertyno VARCHAR(5)
 ,clientno VARCHAR(5)
 ,dealdetails VARCHAR(40)
 ,price VARCHAR(10)
 ,commission VARCHAR(10)
 ,interest VARCHAR(10)
 ,FOREIGN KEY(p_type_ID) REFERENCES PropertyType(p_type_ID)
 ,FOREIGN KEY(clientNo) REFERENCES Client(clientno)
 ,FOREIGN KEY(propertyNo) REFERENCES property_for_rent(propertyNo)
 ,PRIMARY KEY (Payment_ID, p_type_ID, clientNo, propertyNo)
 )


CREATE TABLE ClientType
(client_type_ID VARCHAR(7)
 ,client_type VARCHAR(15)
 ,PRIMARY KEY (client_type_ID)
 )

 ALTER TABLE property_for_rent
 ADD p_type_ID VARCHAR(7)
 FOREIGN KEY (p_type_ID) REFERENCES PropertyType(p_type_ID)

 ALTER TABLE client
 ADD client_type_ID VARCHAR(7)
 FOREIGN KEY (client_type_ID) REFERENCES ClientType(client_type_ID)